{"ast":null,"code":"var _jsxFileName = \"/home/shawnstorie/sprkz-ng/sprkz-pdf-forms/src/components/pdf/ThumbnailSidebar.tsx\";\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { Box, Drawer, List, ListItem, ListItemButton, Typography, IconButton, CircularProgress, Tooltip, useTheme, useMediaQuery, Collapse, Fade, Chip, Paper, SwipeableDrawer } from '@mui/material';\nimport { ChevronLeft, ChevronRight, CheckCircle, RadioButtonUnchecked, PictureAsPdf, Assignment, Close } from '@mui/icons-material';\nimport { PDFService } from '../../services/pdfService';\nimport { animations } from '../../theme/theme';\nimport { microInteractionStyles, presets } from '../../utils/microInteractions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PageThumbnail = ({\n  pageNumber,\n  pdfDoc,\n  isSelected,\n  isCompleted,\n  hasFormFields,\n  onClick\n}) => {\n  const [thumbnail, setThumbnail] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n  useEffect(() => {\n    let isMounted = true;\n    const generateThumbnail = async () => {\n      if (thumbnail) return; // Already loaded\n\n      try {\n        setLoading(true);\n        setError(false);\n        const page = await PDFService.getPage(pdfDoc, pageNumber);\n        const thumbnailDataUrl = await PDFService.generateThumbnail(page, 120);\n        if (isMounted) {\n          setThumbnail(thumbnailDataUrl);\n        }\n      } catch (err) {\n        console.error(`Failed to generate thumbnail for page ${pageNumber}:`, err);\n        if (isMounted) {\n          setError(true);\n        }\n      } finally {\n        if (isMounted) {\n          setLoading(false);\n        }\n      }\n    };\n    generateThumbnail();\n    return () => {\n      isMounted = false;\n    };\n  }, [pageNumber, pdfDoc, thumbnail]);\n  return /*#__PURE__*/_jsxDEV(ListItem, {\n    disablePadding: true,\n    children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n      onClick: () => onClick(pageNumber),\n      selected: isSelected,\n      sx: {\n        flexDirection: 'column',\n        py: 1,\n        px: 2,\n        minHeight: 160,\n        border: isSelected ? '2px solid' : '1px solid',\n        borderColor: isSelected ? 'primary.main' : 'divider',\n        borderRadius: 1,\n        mb: 1,\n        mx: 1,\n        ...microInteractionStyles.hoverLift,\n        '&:hover': {\n          borderColor: 'primary.main',\n          backgroundColor: 'action.hover'\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          width: 120,\n          height: 120,\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          border: '1px solid',\n          borderColor: 'divider',\n          borderRadius: 1,\n          mb: 1,\n          overflow: 'hidden',\n          backgroundColor: 'grey.50',\n          position: 'relative'\n        },\n        children: [loading ? /*#__PURE__*/_jsxDEV(CircularProgress, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this) : error ? /*#__PURE__*/_jsxDEV(PictureAsPdf, {\n          color: \"disabled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this) : thumbnail ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: thumbnail,\n          alt: `Page ${pageNumber} thumbnail`,\n          style: {\n            maxWidth: '100%',\n            maxHeight: '100%',\n            objectFit: 'contain'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(PictureAsPdf, {\n          color: \"disabled\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          position: \"absolute\",\n          top: 4,\n          right: 4,\n          sx: {\n            backgroundColor: 'background.paper',\n            borderRadius: '50%',\n            p: 0.25\n          },\n          children: isCompleted ? /*#__PURE__*/_jsxDEV(CheckCircle, {\n            color: \"success\",\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 15\n          }, this) : hasFormFields ? /*#__PURE__*/_jsxDEV(RadioButtonUnchecked, {\n            color: \"warning\",\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(RadioButtonUnchecked, {\n            color: \"disabled\",\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Box, {\n        textAlign: \"center\",\n        width: \"100%\",\n        children: [/*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          fontWeight: \"bold\",\n          children: [\"Page \", pageNumber]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this), hasFormFields && /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          display: \"block\",\n          color: \"textSecondary\",\n          children: isCompleted ? 'Completed' : 'Has forms'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this);\n};\nexport const ThumbnailSidebar = ({\n  pdfDoc,\n  currentPage,\n  completedPages,\n  pagesWithFormFields,\n  onPageSelect,\n  open = true,\n  onToggle\n}) => {\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down('md'));\n  const [isCollapsed, setIsCollapsed] = useState(isMobile);\n\n  // Auto-collapse on mobile\n  useEffect(() => {\n    setIsCollapsed(isMobile);\n  }, [isMobile]);\n\n  // Generate page list\n  const pages = useMemo(() => {\n    if (!pdfDoc) return [];\n    return Array.from({\n      length: pdfDoc.numPages\n    }, (_, index) => index + 1);\n  }, [pdfDoc]);\n\n  // Calculate completion statistics\n  const completionStats = useMemo(() => {\n    const totalPages = pages.length;\n    const completedCount = completedPages.size;\n    const pagesWithForms = pagesWithFormFields.size;\n    return {\n      totalPages,\n      completedCount,\n      pagesWithForms,\n      completionPercentage: pagesWithForms > 0 ? Math.round(completedCount / pagesWithForms * 100) : 0\n    };\n  }, [pages.length, completedPages.size, pagesWithFormFields.size]);\n  const handleToggleCollapse = () => {\n    setIsCollapsed(!isCollapsed);\n    onToggle === null || onToggle === void 0 ? void 0 : onToggle();\n  };\n  const drawerWidth = isCollapsed ? 60 : 160;\n  const drawerContent = /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column',\n      ...animations.fadeIn\n    },\n    children: [/*#__PURE__*/_jsxDEV(Paper, {\n      elevation: 0,\n      sx: {\n        p: 2,\n        borderBottom: '1px solid',\n        borderColor: 'divider',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'space-between',\n        backgroundColor: 'background.paper',\n        borderRadius: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(Collapse, {\n        in: !isCollapsed,\n        orientation: \"horizontal\",\n        children: /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Assignment, {\n            color: \"primary\",\n            fontSize: \"small\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"h6\",\n            fontSize: \"0.875rem\",\n            fontWeight: 600,\n            children: \"Pages\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Tooltip, {\n        title: isCollapsed ? \"Expand sidebar\" : \"Collapse sidebar\",\n        placement: \"right\",\n        children: /*#__PURE__*/_jsxDEV(IconButton, {\n          onClick: handleToggleCollapse,\n          size: \"small\",\n          sx: {\n            ml: isCollapsed ? 0 : 'auto',\n            ...presets.iconButton\n          },\n          children: isCollapsed ? /*#__PURE__*/_jsxDEV(ChevronRight, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 28\n          }, this) : /*#__PURE__*/_jsxDEV(ChevronLeft, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 47\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      in: !isCollapsed,\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          p: 2,\n          backgroundColor: 'background.elevated'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 1,\n            mb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"textSecondary\",\n            children: \"Progress\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Chip, {\n            label: `${completionStats.completionPercentage}%`,\n            size: \"small\",\n            color: completionStats.completionPercentage === 100 ? 'success' : 'primary',\n            sx: {\n              height: '20px',\n              fontSize: '0.75rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          variant: \"caption\",\n          color: \"textSecondary\",\n          display: \"block\",\n          children: [completionStats.completedCount, \" of \", completionStats.pagesWithForms, \" pages with forms\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            height: '4px',\n            backgroundColor: 'divider',\n            borderRadius: '2px',\n            mt: 1,\n            overflow: 'hidden'\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              height: '100%',\n              backgroundColor: completionStats.completionPercentage === 100 ? 'success.main' : 'primary.main',\n              borderRadius: '2px',\n              width: `${completionStats.completionPercentage}%`,\n              transition: 'width 0.5s ease-in-out'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        flex: 1,\n        overflowY: 'auto'\n      },\n      children: isCollapsed ?\n      /*#__PURE__*/\n      // Collapsed view - just page numbers with indicators\n      _jsxDEV(List, {\n        sx: {\n          p: 0\n        },\n        children: pages.map(pageNumber => /*#__PURE__*/_jsxDEV(Fade, {\n          in: true,\n          timeout: 300 + pageNumber * 50,\n          children: /*#__PURE__*/_jsxDEV(ListItem, {\n            disablePadding: true,\n            children: /*#__PURE__*/_jsxDEV(Tooltip, {\n              title: `Page ${pageNumber}${pagesWithFormFields.has(pageNumber) ? ' (has forms)' : ''}`,\n              placement: \"right\",\n              arrow: true,\n              children: /*#__PURE__*/_jsxDEV(ListItemButton, {\n                onClick: () => onPageSelect(pageNumber),\n                selected: pageNumber === currentPage,\n                sx: {\n                  minHeight: '52px',\n                  // Touch-friendly\n                  justifyContent: 'center',\n                  px: 1,\n                  mx: 0.5,\n                  mb: 0.5,\n                  borderRadius: 2,\n                  ...microInteractionStyles.hoverScale,\n                  ...microInteractionStyles.focusRing,\n                  '&.Mui-selected': {\n                    backgroundColor: 'primary.main',\n                    color: 'primary.contrastText',\n                    '&:hover': {\n                      backgroundColor: 'primary.dark'\n                    }\n                  }\n                },\n                children: /*#__PURE__*/_jsxDEV(Box, {\n                  sx: {\n                    position: 'relative',\n                    display: 'flex',\n                    alignItems: 'center'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Typography, {\n                    variant: \"body2\",\n                    fontWeight: pageNumber === currentPage ? 700 : 600,\n                    sx: {\n                      fontSize: '0.875rem',\n                      lineHeight: 1\n                    },\n                    children: pageNumber\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 372,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Box, {\n                    sx: {\n                      position: 'absolute',\n                      top: -8,\n                      right: -8,\n                      width: 12,\n                      height: 12,\n                      borderRadius: '50%',\n                      backgroundColor: completedPages.has(pageNumber) ? 'success.main' : pagesWithFormFields.has(pageNumber) ? 'warning.main' : 'transparent',\n                      border: completedPages.has(pageNumber) ? '2px solid white' : pagesWithFormFields.has(pageNumber) ? '2px solid white' : 'none',\n                      opacity: completedPages.has(pageNumber) || pagesWithFormFields.has(pageNumber) ? 1 : 0,\n                      transition: 'all 0.2s'\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 384,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 17\n          }, this)\n        }, pageNumber, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this) :\n      /*#__PURE__*/\n      // Expanded view - full thumbnails\n      _jsxDEV(List, {\n        sx: {\n          p: 0\n        },\n        children: pages.map(pageNumber => /*#__PURE__*/_jsxDEV(PageThumbnail, {\n          pageNumber: pageNumber,\n          pdfDoc: pdfDoc,\n          isSelected: pageNumber === currentPage,\n          isCompleted: completedPages.has(pageNumber),\n          hasFormFields: pagesWithFormFields.has(pageNumber),\n          onClick: onPageSelect\n        }, pageNumber, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 250,\n    columnNumber: 5\n  }, this);\n  if (isMobile) {\n    return /*#__PURE__*/_jsxDEV(SwipeableDrawer, {\n      variant: \"temporary\",\n      open: open || false,\n      onClose: onToggle || (() => {}),\n      onOpen: onToggle || (() => {}),\n      disableBackdropTransition: true,\n      disableDiscovery: true,\n      ModalProps: {\n        keepMounted: true // Better mobile performance\n      },\n      sx: {\n        '& .MuiDrawer-paper': {\n          width: isCollapsed ? 80 : 280,\n          boxSizing: 'border-box',\n          transition: theme.transitions.create('width', {\n            easing: theme.transitions.easing.easeOut,\n            duration: theme.transitions.duration.enteringScreen\n          }),\n          borderTopRightRadius: 16,\n          borderBottomRightRadius: 16,\n          boxShadow: theme.shadows[8]\n        },\n        '& .MuiBackdrop-root': {\n          backgroundColor: 'rgba(0, 0, 0, 0.3)',\n          backdropFilter: 'blur(4px)'\n        }\n      },\n      children: /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          ...drawerContent.props.sx,\n          height: '100vh',\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Paper, {\n          elevation: 0,\n          sx: {\n            p: 2,\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'space-between',\n            backgroundColor: 'background.paper',\n            borderRadius: 0,\n            borderBottom: '1px solid',\n            borderColor: 'divider'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Assignment, {\n              color: \"primary\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              fontSize: \"1rem\",\n              fontWeight: 600,\n              children: \"Document Pages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 482,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            onClick: onToggle,\n            size: \"large\",\n            sx: {\n              minWidth: '48px',\n              minHeight: '48px'\n            },\n            children: /*#__PURE__*/_jsxDEV(Close, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 497,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 489,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }, this), drawerContent.props.children.slice(1), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 463,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Drawer, {\n    variant: \"permanent\",\n    sx: {\n      width: drawerWidth,\n      flexShrink: 0,\n      transition: theme.transitions.create('width', {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.enteringScreen\n      }),\n      '& .MuiDrawer-paper': {\n        width: drawerWidth,\n        boxSizing: 'border-box',\n        transition: theme.transitions.create('width', {\n          easing: theme.transitions.easing.sharp,\n          duration: theme.transitions.duration.enteringScreen\n        }),\n        overflowX: 'hidden'\n      }\n    },\n    children: drawerContent\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 508,\n    columnNumber: 5\n  }, this);\n};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}