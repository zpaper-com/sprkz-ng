{"ast":null,"code":"import { defineIntegration, _INTERNAL_copyFlagsFromScopeToEvent, _INTERNAL_insertFlagToScope, _INTERNAL_addFeatureFlagToActiveSpan } from '@sentry/core';\nconst openFeatureIntegration = defineIntegration(() => {\n  return {\n    name: 'OpenFeature',\n    processEvent(event, _hint, _client) {\n      return _INTERNAL_copyFlagsFromScopeToEvent(event);\n    }\n  };\n});\n\n/**\n * OpenFeature Hook class implementation.\n */\nclass OpenFeatureIntegrationHook {\n  /**\n   * Successful evaluation result.\n   */\n  after(_hookContext, evaluationDetails) {\n    _INTERNAL_insertFlagToScope(evaluationDetails.flagKey, evaluationDetails.value);\n    _INTERNAL_addFeatureFlagToActiveSpan(evaluationDetails.flagKey, evaluationDetails.value);\n  }\n\n  /**\n   * On error evaluation result.\n   */\n  error(hookContext, _error, _hookHints) {\n    _INTERNAL_insertFlagToScope(hookContext.flagKey, hookContext.defaultValue);\n    _INTERNAL_addFeatureFlagToActiveSpan(hookContext.flagKey, hookContext.defaultValue);\n  }\n}\nexport { OpenFeatureIntegrationHook, openFeatureIntegration };","map":{"version":3,"names":["openFeatureIntegration","defineIntegration","name","processEvent","event","_hint","_client","_INTERNAL_copyFlagsFromScopeToEvent","OpenFeatureIntegrationHook","after","_hookContext","evaluationDetails","_INTERNAL_insertFlagToScope","flagKey","value","_INTERNAL_addFeatureFlagToActiveSpan","error","hookContext","_error","_hookHints","defaultValue"],"sources":["/home/shawnstorie/sprkz-ng/sprkz-pdf-forms/node_modules/@sentry/browser/src/integrations/featureFlags/openfeature/integration.ts"],"sourcesContent":["/**\n * Sentry integration for capturing OpenFeature feature flag evaluations.\n *\n * See the [feature flag documentation](https://develop.sentry.dev/sdk/expected-features/#feature-flags) for more information.\n *\n * @example\n * ```\n * import * as Sentry from \"@sentry/browser\";\n * import { OpenFeature } from \"@openfeature/web-sdk\";\n *\n * Sentry.init(..., integrations: [Sentry.openFeatureIntegration()]);\n * OpenFeature.setProvider(new MyProviderOfChoice());\n * OpenFeature.addHooks(new Sentry.OpenFeatureIntegrationHook());\n * ```\n */\nimport type { Client, Event, EventHint, IntegrationFn } from '@sentry/core';\nimport {\n  _INTERNAL_addFeatureFlagToActiveSpan,\n  _INTERNAL_copyFlagsFromScopeToEvent,\n  _INTERNAL_insertFlagToScope,\n  defineIntegration,\n} from '@sentry/core';\nimport type { EvaluationDetails, HookContext, HookHints, JsonValue, OpenFeatureHook } from './types';\n\nexport const openFeatureIntegration = defineIntegration(() => {\n  return {\n    name: 'OpenFeature',\n\n    processEvent(event: Event, _hint: EventHint, _client: Client): Event {\n      return _INTERNAL_copyFlagsFromScopeToEvent(event);\n    },\n  };\n}) satisfies IntegrationFn;\n\n/**\n * OpenFeature Hook class implementation.\n */\nexport class OpenFeatureIntegrationHook implements OpenFeatureHook {\n  /**\n   * Successful evaluation result.\n   */\n  public after(_hookContext: Readonly<HookContext<JsonValue>>, evaluationDetails: EvaluationDetails<JsonValue>): void {\n    _INTERNAL_insertFlagToScope(evaluationDetails.flagKey, evaluationDetails.value);\n    _INTERNAL_addFeatureFlagToActiveSpan(evaluationDetails.flagKey, evaluationDetails.value);\n  }\n\n  /**\n   * On error evaluation result.\n   */\n  public error(hookContext: Readonly<HookContext<JsonValue>>, _error: unknown, _hookHints?: HookHints): void {\n    _INTERNAL_insertFlagToScope(hookContext.flagKey, hookContext.defaultValue);\n    _INTERNAL_addFeatureFlagToActiveSpan(hookContext.flagKey, hookContext.defaultValue);\n  }\n}\n"],"mappings":";MAwBaA,sBAAA,GAAyBC,iBAAiB,CAAC,MAAM;EAC5D,OAAO;IACLC,IAAI,EAAE,aAAa;IAEnBC,YAAYA,CAACC,KAAK,EAASC,KAAK,EAAaC,OAAO,EAAiB;MACnE,OAAOC,mCAAmC,CAACH,KAAK,CAAC;IACvD;EACA,CAAG;AACH,CAAC;;AAED;AACA;AACA;AACO,MAAMI,0BAAA,CAAsD;EACnE;AACA;AACA;EACSC,KAAKA,CAACC,YAAY,EAAoCC,iBAAiB,EAAsC;IAClHC,2BAA2B,CAACD,iBAAiB,CAACE,OAAO,EAAEF,iBAAiB,CAACG,KAAK,CAAC;IAC/EC,oCAAoC,CAACJ,iBAAiB,CAACE,OAAO,EAAEF,iBAAiB,CAACG,KAAK,CAAC;EAC5F;;EAEA;AACA;AACA;EACSE,KAAKA,CAACC,WAAW,EAAoCC,MAAM,EAAWC,UAAU,EAAoB;IACzGP,2BAA2B,CAACK,WAAW,CAACJ,OAAO,EAAEI,WAAW,CAACG,YAAY,CAAC;IAC1EL,oCAAoC,CAACE,WAAW,CAACJ,OAAO,EAAEI,WAAW,CAACG,YAAY,CAAC;EACvF;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}